<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title> Ajout </title>
        <link rel="stylesheet" href="../accueil.css">
        <link rel="stylesheet" href="./ajout.css">
    </head>

    <body>
        <header class="menu">
            <nav>
                <ul class="menuNavigation">

                    <li>
                         <a href="../Accueil.html">Accueil</a>
                    </li>
                    <li>
                        <a href="../Films/films.html">Films</a>
                    </li>
                    <li>
                        <a href="./ajout.html">Ajout</a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/shorts/Qi_bGQa4Eow" target="_blank">Lien</a>
                    </li>
                </ul>
            </nav>
        </header>

        <body>
            <form id="form" name="form"class="centered-form">
                <div class="centerElement date-container">
                    <select name="jour" id="jour">
                        <option value="" disabled selected>Jour</option>
                        <script>
                            for (let i = 1; i <= 31; i++) {
                                document.write(`<option value="${i}">${i}</option>`);
                            }
                        </script>
                    </select>                
                    <select name="mois" id="mois">
                        <option value="" disabled selected>Mois</option>
                        <option value="01">Janvier</option>
                        <option value="02">Février</option>
                        <option value="03">Mars</option>
                        <option value="04">Avril</option>
                        <option value="05">Mai</option>
                        <option value="06">Juin</option>
                        <option value="07">Juillet</option>
                        <option value="08">Août</option>
                        <option value="09">Septembre</option>
                        <option value="10">Octobre</option>
                        <option value="11">Novembre</option>
                        <option value="12">Décembre</option>
                    </select>
                    <select name="annee" id="annee">
                        <option value="" disabled selected>Année</option>
                        <option value="01">2025</option>
                        <option value="02">2026</option>
                        <option value="03">2027</option>
                        <option value="04">2028</option>
                        <option value="05">2029</option>
                        <option value="06">2030</option>
                    </select>
                </div>
                

                <div class="centerElement">
                    <input name="titre" placeholder="Titre" id="titre" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="note" placeholder="Note" id="note" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="theme" placeholder="Thème" id="theme" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="realisateur" placeholder="Réalisateur" id="realisateur" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="producteur" placeholder="Producteur" id="producteur" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="acteur" placeholder="Acteurs principaux" id="acteur" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="synopsis" placeholder="Synopsis" id="synopsis" type="text"/> 
                </div>

                <div class="centerElement">
                    <input name="urlaffiche" placeholder="Url Affiche" id="urlaffiche" type="text"/> 
                </div>
    
                <div class="centerElement">
                    <button type="submit" id="enregistrer"> Enregistrer </button>
                </div>
                  
            </form>
        </body>
</html>

<script>
    document.getElementById('form').addEventListener('submit', (event) => {
        event.preventDefault();
        console.log(event);
        formSend(event);
    })

    function formSend(eventData){
        let object = {};
        let isMissing = false;

        for (let idName of eventData.target){
            console.log(idName.value);
            if(idName.value === '' && idName.type === 'text'){
                isMissing = true;
            }

            if(!idName.value && idName.type === 'text'){
                isMissing = true;
            }else{
                if(idName.type !== 'submit' && idName.name){
                    object[idName.name] = idName.value;
                }
            }
        }

        console.log(object, isMissing);

        if(isMissing === true){
            alert("Nope");
        }else{
            localStorage.setItem("DataStorage", JSON.stringify(object));
        }
    }

    //Vérifie la présence de donnée
    if(localStorage.getItem("DataStorage")){
        console.log(JSON.parse(localStorage.getItem("DataStorage")) );
    }

</script>